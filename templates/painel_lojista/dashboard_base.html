{% extends 'base.html' %}
{% load static %}

{% block titulo %}{{ titulo|default:"Meu Painel" }} - {{ block.super }}{% endblock %}

{% block carrossel %}{% endblock %}

{% block conteudo %}
<style>
    /* Estilos para o Dashboard */
    .dashboard-container {
        display: flex;
        min-height: calc(100vh - 200px); /* Altura da tela menos header/footer */
    }

    .dashboard-sidebar {
        width: 280px;
        flex-shrink: 0;
        background: #f8f9fa;
        border-right: 1px solid #dee2e6;
        padding: 1.5rem;
    }

    .dashboard-sidebar .nav-link {
        color: #333;
        font-weight: 500;
        padding: 0.75rem 1rem;
        margin-bottom: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
    }

    .dashboard-sidebar .nav-link:hover {
        background: #e9ecef;
        color: var(--primary-color);
    }

    .dashboard-sidebar .nav-link.active {
        background: var(--primary-color);
        color: white;
    }

    .dashboard-sidebar .nav-link i {
        margin-right: 10px;
        width: 20px;
        text-align: center;
    }

    .dashboard-content {
        flex-grow: 1;
        padding: 2.5rem;
        background: #fff;
    }

    .dashboard-header {
        border-bottom: 2px solid var(--accent-color);
        padding-bottom: 1rem;
        margin-bottom: 2rem;
    }
    .dashboard-header h2 {
        color: var(--primary-color);
        font-weight: 700;
    }

    /* Cards de Estatística */
    .stat-card {
        border: none;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 160, 160, 0.1);
        color: white;
        padding: 1.5rem;
    }
    .stat-card .stat-icon {
        font-size: 3rem;
        opacity: 0.3;
    }
    .stat-card .stat-value {
        font-size: 2.2rem;
        font-weight: 700;
    }
    .stat-card .stat-label {
        font-size: 1rem;
        font-weight: 500;
        opacity: 0.9;
    }
</style>

<div class="container-fluid dashboard-container">
    <aside class="dashboard-sidebar">
        <h4>Painel do Lojista</h4>
        <p class="text-muted small">
            {% if request.user.is_superuser %}
                (Visão do Admin)
            {% else %}
                {{ loja_usuario.nome }}
            {% endif %}
        </p>
        
        <ul class="nav flex-column mt-4">
            <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'dashboard_home' %}active{% endif %}" 
                   href="{% url 'painel_lojista:dashboard_home' %}">
                   <i class="bi bi-grid-fill"></i> Início
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'minha_loja_update' %}active{% endif %}" 
                   href="{% url 'painel_lojista:minha_loja_update' %}">
                   <i class="bi bi-shop"></i> Minha Loja
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link {% if request.resolver_match.url_name == 'meus_produtos_list' %}active{% endif %}" 
                   href="{% url 'painel_lojista:meus_produtos_list' %}">
                   <i class="bi bi-bag-check-fill"></i> Meus Produtos
                </a>
            </li>
            <li class="nav-item mt-3 border-top pt-3">
                <a class="nav-link" href="{% url 'loja:loja_list' %}">
                    <i class="bi bi-arrow-left-circle"></i> Voltar ao Site
                </a>
            </li>
        </ul>
    </aside>

    <main class="dashboard-content">
        <div class="dashboard-header">
            <h2>{{ titulo }}</h2>
        </div>

        {% block dashboard_conteudo %}
        {% endblock %}
    </main>
</div>
{% endblock %}